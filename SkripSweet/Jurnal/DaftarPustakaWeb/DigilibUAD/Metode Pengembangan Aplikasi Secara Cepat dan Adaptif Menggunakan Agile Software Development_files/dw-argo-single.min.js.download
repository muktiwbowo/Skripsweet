jQuery(function(a){function b(b){a("#main-content").addClass("nextpost-loading"),a.ajax({url:singleScript.ajax_url,type:"POST",data:{action:"dw-get_adjacent_post",post_id:singleScript.postId,nonce:singleScript.nonce,previous:b,is_cat_refer:singleScript.is_cat_refer},complete:function(b,c){a("#main-content").removeClass("nextpost-loading")},success:function(d){if(d.success){var e=a(d.data.post).find("#main-content").html(),f=a("#stream-post-"+singleScript.postId),g=a("#stream-post-"+d.data.postId);if(b&&c(1),g.length>0){f.removeClass("reading-now"),f.find("time").text(f.find("time").data("time")),g.addClass("reading-now"),g.find("time").text(singleScript.text_readingnow);var h=g.offset().top-a(".stream-post:first").offset().top,i=g.offset().left-a(".stream-post:first").offset().left,j=null;j=!("ontouchstart"in document.documentElement)&&a(window).width()<=1200&&a(window).width()>=767||"ontouchstart"in document.documentElement&&a(window).width()<=1200&&a(window).width()>=767?-i+"px , 0":"0,"+-h+"px",a("#side-content .stream-list-inner").css("transition","all .3s"),Modernizr.csstransforms3d?a("#side-content .stream-list-inner").css("transform","translate3d("+j+",0) scale3d(1,1,1)"):Modernizr.csstransforms&&a("#side-content .stream-list-inner").css("transform","translate("+j+")")}else a("#side-content .stream-list-inner .loadmore").trigger("click");a("#main-content").html(e),!d.data.permalink||a.browser.msie&&parseInt(jQuery.browser.version)<10||window.history.pushState(null,null,d.data.permalink),singleScript.postId=d.data.postId}else d.data.error||console.log("Empty post")}})}function c(b){b||(b=6);var c=a(".stream-list-inner .loadmore");a(".stream-list").addClass("stream-list-loading"),a.ajax({url:singleScript.ajax_url,type:"POST",dataType:"json",data:{action:"dw-loadmore-stream-list",last_post_id:c.data("last"),loadmore_number:b},complete:function(){a(".stream-list").removeClass("stream-list-loading")},success:function(b,d,e){if(b.success){c.data("last",b.data.last);var f=a(b.data.html);c.before(f)}else c.text(singleScript.text_streamlist_end)}})}var d=a(".stream-list");d.find(".stream-list-inner");a(document).on("keyup",function(c){if(!(a.browser.msie&&parseInt(a.browser.version)<=9)){var d=c.which||c.keyCode;switch(d){case 39:b(!0);break;case 37:b()}}}),a("#main-content").delegate(".entry-header .post-navigation .btn.prev","click",function(a){a.preventDefault(),b()}),a("#main-content").delegate(".entry-header .post-navigation .btn.nex","click",function(a){a.preventDefault(),b(!0)}),a("#main-content").delegate(".font-size-minus","click",function(b){b.preventDefault();var c=a(".entry-content"),d=parseInt(c.css("font-size").replace("px",""));return 12>=d?!1:void c.css("font-size",d-2).css("line-height","1.5")}),a("#main-content").delegate(".font-size-plus","click",function(b){b.preventDefault();var c=a(".entry-content"),d=parseInt(c.css("font-size").replace("px",""));return d>=28?!1:void c.css("font-size",d+2).css("line-height","1.5")}),a(".stream-list-inner .loadmore").on("click",function(a){a.preventDefault(),c()}),d=function(){if(a(".stream-list-inner").length>0){var b=a(".stream-list-inner .stream-post.reading-now").offset().top-a(".stream-post:first").offset().top,c=a(".stream-list-inner .stream-post.reading-now").offset().left-a(".stream-post:first").offset().left;if(!("ontouchstart"in document.documentElement)&&a(window).width()<=1200&&a(window).width()>=767||"ontouchstart"in document.documentElement&&a(window).width()<=1200&&a(window).width()>=767){var d=0;a(".stream-list-inner .stream-post").each(function(){d+=a(this).outerWidth()}),a(".stream-list-inner").width(d).css("transform","translate("+-c+"px,0)")}else a(".stream-list-inner").width("auto").css("transform","translate(0,"+-b+"px)")}},a(document).ready(function(a){d(),a(window).resize(function(){d()})}),a(".cat_view_more").on("click",function(b){a(".cat_tip").toggleClass("in")})});